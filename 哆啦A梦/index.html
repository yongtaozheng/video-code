<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Doraemon</title>
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background-color: #f0f0f0;
      }
    </style>
  </head>

  <body>
    <canvas id="canvas" width="400" height="600"></canvas>
    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      //椭圆
      function drawEllipse(ctx, x, y, radiusX, radiusY) {
        const kappa = 0.5522848;
        const ox = radiusX * kappa; // 水平控制点偏移量
        const oy = radiusY * kappa; // 垂直控制点偏移量

        ctx.beginPath();
        ctx.moveTo(x, y - radiusY);
        ctx.bezierCurveTo(
          x + ox,
          y - radiusY,
          x + radiusX,
          y - oy,
          x + radiusX,
          y
        );
        ctx.bezierCurveTo(
          x + radiusX,
          y + oy,
          x + ox,
          y + radiusY,
          x,
          y + radiusY
        );
        ctx.bezierCurveTo(
          x - ox,
          y + radiusY,
          x - radiusX,
          y + oy,
          x - radiusX,
          y
        );
        ctx.bezierCurveTo(
          x - radiusX,
          y - oy,
          x - ox,
          y - radiusY,
          x,
          y - radiusY
        );
        ctx.closePath();
      }
      //圆角矩形
      function drawRoundedRect(x, y, w, h, radius) {
        ctx.beginPath();
        ctx.moveTo(x + radius, y);
        ctx.arcTo(x + w, y, x + w, y + h, radius); // 右上角
        ctx.arcTo(x + w, y + h, x, y + h, radius); // 右下角
        ctx.arcTo(x, y + h, x, y, radius); // 左下角
        ctx.arcTo(x, y, x + w, y, radius); // 左上角
        ctx.closePath();
        ctx.fill();
      }
      //弧线
      function drawArc(
        startX,
        startY,
        endX,
        endY,
        arcRadians,
        strokeStyle = "black",
        lineWidth = 1,
        isClockwise = false
      ) {
        const dx = endX - startX;
        const dy = endY - startY;
        const distance = Math.sqrt(dx * dx + dy * dy);
        const radius = distance / (2 * Math.sin(arcRadians / 2));

        const midX = (startX + endX) / 2;
        const midY = (startY + endY) / 2;

        const angleToMid = Math.atan2(dy, dx);
        // 根据绘制方向调整圆心位置
        let angleToCenter =
          angleToMid + (isClockwise ? -Math.PI / 2 : Math.PI / 2);

        const centerX = midX + radius * Math.cos(angleToCenter);
        const centerY = midY + radius * Math.sin(angleToCenter);

        // 计算起始角度和结束角度
        const startAngle = Math.atan2(startY - centerY, startX - centerX);
        let endAngle = startAngle + (isClockwise ? -arcRadians : arcRadians);
        // 绘制弧线
        ctx.beginPath();
        ctx.arc(centerX, centerY, radius, startAngle, endAngle, isClockwise);
        ctx.strokeStyle = strokeStyle;
        ctx.lineWidth = lineWidth;
        ctx.stroke();
      }
      //桶状
      function drawBarrelShape(
        startX,
        startY,
        width,
        height,
        curveRadius,
        fillColor,
        strokeColor,
        lineWidth
      ) {
        // 移动到起始点
        ctx.beginPath();
        ctx.moveTo(startX + curveRadius, startY);

        // 绘制上侧边直线
        ctx.lineTo(startX + width - curveRadius, startY);

        // 绘制右侧曲线
        const controlX1 = startX + width;
        const controlY1 = startY + height / 2;
        ctx.quadraticCurveTo(
          controlX1,
          controlY1,
          startX + width - curveRadius,
          startY + height
        );

        // 绘制下侧边直线
        ctx.lineTo(startX + curveRadius, startY + height);

        // 绘制左侧曲线
        const controlX2 = startX;
        const controlY2 = startY + height / 2;
        ctx.quadraticCurveTo(
          controlX2,
          controlY2,
          startX + curveRadius,
          startY
        );

        // 闭合路径
        ctx.closePath();

        // 设置填充颜色和边框颜色
        ctx.fillStyle = fillColor;
        ctx.strokeStyle = strokeColor;
        ctx.lineWidth = lineWidth;

        // 填充和绘制边框
        ctx.fill();
        ctx.stroke();
      }
      //倾斜矩形
      function drawSkewedShape(
        startX,
        startY,
        width,
        height,
        curveRadius,
        skewAngle,
        isClockwise = false,
        fillColor = "#0096FF",
        strokeColor = "black",
        lineWidth = 1
      ) {
        const angleDirection = isClockwise ? -skewAngle : skewAngle;
        ctx.beginPath();
        ctx.moveTo(startX, startY);

        const endX1 = startX + width * Math.cos(angleDirection);
        const endY1 = startY + width * Math.sin(angleDirection);
        ctx.lineTo(endX1, endY1);

        const controlX = endX1 + curveRadius * Math.cos(angleDirection);
        const controlY = endY1 + (height / 2) * Math.sin(angleDirection);
        const endX2 = endX1;
        const endY2 = endY1 + height * Math.sin(angleDirection);
        ctx.quadraticCurveTo(controlX, controlY, endX2, endY2);

        const endX3 = startX;
        const endY3 = startY + height * Math.sin(angleDirection);
        ctx.lineTo(endX3, endY3);

        ctx.closePath();

        ctx.fillStyle = fillColor;
        ctx.strokeStyle = strokeColor;
        ctx.lineWidth = lineWidth;

        ctx.fill();
        ctx.stroke();
      }

      // 绘制哆啦 A 梦的身体
      function drawBody() {
        drawBarrelShape(40, 310, 325, 230, 50, "#0096FF", "black", 1);
        // 肚子白色区域
        ctx.beginPath();
        ctx.arc(200, 410, 100, 0, 2 * Math.PI);
        ctx.fillStyle = "white";
        ctx.fill();
        ctx.stroke();
        ctx.beginPath();
        ctx.lineWidth = 2;
        ctx.arc(200, 410, 80, 0, Math.PI);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(120, 410);
        ctx.lineTo(280, 410);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(190, 515);
        ctx.lineTo(210, 515);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(200, 515);
        ctx.lineTo(200, 550);
        ctx.stroke();
      }

      // 绘制哆啦 A 梦的头部
      function drawHead() {
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.arc(200, 200, 160, (3 / 4) * Math.PI, (9 / 4) * Math.PI);
        ctx.fillStyle = "#0096FF";
        ctx.fill();
        ctx.stroke();

        // 脸部白色区域
        ctx.beginPath();
        ctx.arc(200, 220, 130, (3 / 4) * Math.PI, (9 / 4) * Math.PI);
        ctx.fillStyle = "white";
        ctx.fill();
        ctx.stroke();

        // 眼睛
        // 左眼
        ctx.beginPath();
        drawEllipse(ctx, 170, 100, 30, 35);
        ctx.fillStyle = "white";
        ctx.fill();
        ctx.stroke();
        ctx.beginPath();
        drawEllipse(ctx, 175, 110, 8, 10);
        ctx.fillStyle = "black";
        ctx.fill();
        ctx.beginPath();
        ctx.arc(175, 110, 3, 0, 2 * Math.PI);
        ctx.fillStyle = "#FFF7FF";
        ctx.fill();
        ctx.stroke();
        // 右眼
        ctx.beginPath();
        drawEllipse(ctx, 230, 100, 30, 35);
        ctx.fillStyle = "white";
        ctx.fill();
        ctx.stroke();
        ctx.restore();
        ctx.beginPath();
        drawEllipse(ctx, 225, 110, 8, 10);
        ctx.fillStyle = "black";
        ctx.fill();
        ctx.beginPath();
        ctx.arc(225, 110, 3, 0, 2 * Math.PI);
        ctx.fillStyle = "#FFF7FF";
        ctx.fill();
        ctx.stroke();

        //鼻子到嘴巴的线
        ctx.beginPath();
        ctx.moveTo(200, 155);
        ctx.lineTo(200, 280);
        ctx.strokeStyle = "black";
        ctx.lineWidth = 3;
        ctx.stroke();

        // 鼻子
        ctx.beginPath();
        ctx.arc(200, 140, 18, 0, 2 * Math.PI);
        ctx.fillStyle = "red";
        ctx.lineWidth = 1;
        ctx.fill();
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(200, 135, 5, 0, 2 * Math.PI);
        ctx.fillStyle = "#FFF7FF";
        ctx.strokeStyle = "rgba(0, 0, 0, 0)";
        ctx.fill();
        ctx.stroke();

        // 嘴巴
        ctx.beginPath();
        ctx.arc(200, 180, 100, (1 / 6) * Math.PI, (5 / 6) * Math.PI);
        ctx.strokeStyle = "black";
        ctx.lineWidth = 3;
        ctx.stroke();

        // 胡须
        // 左边胡须
        ctx.beginPath();
        ctx.lineWidth = 2;
        ctx.moveTo(100, 150);
        ctx.lineTo(180, 180);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(100, 200);
        ctx.lineTo(180, 200);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(100, 240);
        ctx.lineTo(180, 220);
        ctx.stroke();
        // 右边胡须
        ctx.beginPath();
        ctx.moveTo(220, 180);
        ctx.lineTo(300, 150);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(220, 200);
        ctx.lineTo(300, 200);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(220, 220);
        ctx.lineTo(300, 240);
        ctx.stroke();
      }

      // 绘制哆啦 A 梦的手
      function drawHands() {
        ctx.beginPath();
        ctx.lineWidth = 1;
        ctx.arc(40, 405, 40, 0, Math.PI * 2);
        ctx.fillStyle = "#ffffff";
        ctx.fill();
        ctx.stroke();

        // 右手
        ctx.beginPath();
        ctx.lineWidth = 1;
        ctx.arc(360, 405, 40, 0, Math.PI * 2);
        ctx.fillStyle = "#ffffff";
        ctx.fill();
        ctx.stroke();
      }

      // 绘制哆啦 A 梦的脚
      function drawFeet() {
        ctx.beginPath();
        ctx.ellipse(131, 550, 70, 30, 0, 0, 2 * Math.PI);
        ctx.fillStyle = "white";
        ctx.fill();
        ctx.strokeStyle = "black";
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.beginPath();
        ctx.ellipse(269, 550, 70, 30, 0, 0, 2 * Math.PI);
        ctx.fillStyle = "white";
        ctx.fill();
        ctx.strokeStyle = "black";
        ctx.lineWidth = 2;
        ctx.stroke();
      }

      // 绘制哆啦 A 梦的铃铛
      function drawBell() {
        ctx.beginPath();
        ctx.fillStyle = "#CD0833"; // 设置填充颜色
        drawRoundedRect(85, 310, 235, 10, 5);
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(200, 340, 30, 0, 2 * Math.PI);
        ctx.fillStyle = "#F6E03D";
        ctx.lineWidth = 1;
        ctx.fill();
        ctx.stroke();
        ctx.beginPath();
        ctx.fillStyle = "#F6E03D"; // 设置填充颜色
        drawRoundedRect(170, 325, 60, 5, 2.5);
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(200, 345, 8, 0, 2 * Math.PI);
        ctx.fillStyle = "#816D4C";
        ctx.fill();
        ctx.beginPath();
        ctx.moveTo(200, 353);
        ctx.lineTo(200, 370);
        ctx.stroke();
      }

      drawSkewedShape(30, 440, 80, 100, 50, Math.PI / 4, true);
      drawSkewedShape(310, 310, 80, 100, 50, Math.PI / 4, false);
      drawBody();
      drawFeet();
      drawHands();
      drawHead();
      drawBell();
    </script>
  </body>
</html>
